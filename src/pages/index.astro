---
import Layout from '../layouts/Layout.astro'
---

<Layout title='Welcome to Astro.'>
	<main class='max-w-xl mx-auto p-6'>
		<header>
			<h1
				class='text-center text-4xl md:text-5xl lg:text-6xl font-bold text-blue-700 py-4 mb-4'
			>
				Welcome to <span
					class='bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-indigo-500 to-purple-500'
					>Chapterize</span
				>
			</h1>
		</header>
		<!-- Step 1 -->
		<div class='bg-white shadow-lg rounded-md p-6 mb-4'>
			<h2 class='text-2xl font-bold text-blue-600 pb-2'>Step 1</h2>
			<p class='text-gray-700'>
				To begin, navigate to your YouTube video and copy the URL.<br />

				<span class='pt-2'> Example:</span>
				<span
					class='text-center bg-blue-100 text-blue-500 p-2 rounded inline-block mt-2'
				>
					https://www.youtube.com/watch?v=PbTlqNrz18Y
				</span>
			</p>
		</div>
		<!-- Step 2 -->
		<div class='bg-white shadow-lg rounded-md p-6 mb-4'>
			<h2 class='text-2xl font-bold text-blue-600 pb-2'>Step 2</h2>
			<p class='text-gray-700'>
				<strong class='text-blue-600'>Chapterize your video</strong> by pasting the
				URL into the input box below. Then, click the button to have AI generate
				chapters for your video.
			</p>
		</div>
		<!-- Form -->
		<aside class='bg-white shadow-lg rounded-md p-6 mb-4'>
			<form>
				<label for='url' class='text-2xl font-bold text-blue-600 pb-2'
					>Chapterize Video</label
				>
				<input
					id='url'
					name='url'
					type='search'
					class='mt-4 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm'
					placeholder='Paste your video URL here'
				/>
				<button
					class='mt-3 w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-500 disabled:bg-blue-200 disabled:cursor-not-allowed'
					type='submit'
					disabled
				>
					Chapterize It!
				</button>
			</form>
			<script>
				const form = document.querySelector('form')
				const input = document.querySelector('input')
				const submitButton = document.querySelector('button')

				input.addEventListener('input', () => {
					try {
						const url = new URL(input.value)
						const host = url.host.toLowerCase()
						const searchParams = new URLSearchParams(url.search)
						const videoId = searchParams.get('v')

						if (
							(host === 'www.youtube.com' || host === 'youtube.com') &&
							videoId
						) {
							submitButton.disabled = false
							submitButton.classList.remove('bg-blue-200')
							submitButton.classList.add(
								'bg-blue-600',
								'hover:bg-blue-500',
								'cursor-pointer'
							)
						} else {
							throw new Error()
						}
					} catch (err) {
						submitButton.disabled = true
						submitButton.classList.remove(
							'bg-blue-600',
							'hover:bg-blue-500',
							'cursor-pointer'
						)
						submitButton.classList.add('bg-blue-200')
					}
				})

				form.addEventListener('submit', (event) => {
					event.preventDefault()

					// Submit your form or perform your action here.
					console.log(
						'Video ID: ' +
							new URLSearchParams(new URL(input.value).search).get('v')
					)
				})
			</script>
		</aside>
	</main>
</Layout>
